/*! fotofrafica 2015-04-06 */
function setSquareHeight(){var a=$(window).width();$(".j-square").height(a)}function runMasonry(a,b){var c=$(a).masonry();c.imagesLoaded(function(){c.masonry({itemSelector:b}),c.masonry("reloadItems"),c.masonry("layout")})}function destroyMasonry(a){$(a).masonry("destroy")}function getHeaderHeight(){return $(".header-wrapper").height()}function getWindowHeight(){return $(window).height()}function setWindowHeight(a){$(a).height(getWindowHeight())}function setPadding(a,b,c){$(a).css("padding-"+b,c)}function setHeaderHeightPadding(a,b){var c=getHeaderHeight();$(a).css("padding-"+b,c)}function setHeightMinusElement(a,b,c){$.each($(a),function(){var a=$(this).closest(b),d=a.find(c+":first"),e=(a.outerHeight(),d.outerHeight()),f=getWindowHeight()-e;$(this).height(f)})}function runFitVids(a){$(a).fitVids()}function showFilters(a){if($(a).hasClass("tab-filter--active"))return $(".tab-filter").removeClass("tab-filter--active"),void $(".filters__content > div").css("height","0px").removeClass("padding--small");$(".tab-filter").removeClass("tab-filter--active"),$(a).addClass("tab-filter--active");var b=$(a).data("filter");$(".filters__content > div").css("height","0px").removeClass("padding--small"),$(".filters__content .filter-"+b).addClass("padding--small").height("auto")}function toggleFiltersNav(){var a=$(".filters__results .filter").length;0==a&&$(".filters__results").hide(),a>0&&$(".filters__results").show()}function toggleiFrame(){console.log("toggleiFrame"),console.log($(".iframe-fundacion-televisa")),$(".iframe-fundacion-televisa").toggle()}function addFilter(a){var b=$(a).clone();if($(a).hasClass("filter--active")){$(a).removeClass("filter--active"),b.hasClass("filter--info")&&b.find("span").remove();var c=b.html();return $(".filters__results .filter:contains("+c+")").remove(),void toggleFiltersNav()}$(a).addClass("filter--active"),b.addClass("filter--active"),b.hasClass("filter--info")&&(b.removeClass("filter--info"),b.find("span").remove()),b.appendTo(".filters__results"),toggleFiltersNav()}function addSearchFilter(a){var b='<a class="[ filter ] [ button button--hollow button--small button--dark ] [ inline-block margin-bottom--small ] filter--active" data-type="buscar" data-value="'+a+'">'+a+"</a>";$(".filters__results").append(b),toggleFiltersNav()}function removeFilter(a){var b=$(a).html();$(a).remove(),$(".filters__content .filter:contains("+b+")").removeClass("filter--active"),toggleFiltersNav()}function removeSearchFilters(){$('*[data-type="buscar"]').remove(),toggleFiltersNav()}function getFilters(a){var b=$(".filters__results .filter--active"),c=[];return $.each(b,function(b,d){var e={},f=$(d).data("type"),g=$(d).data("value");e.type=f,e.value=g,a||clearGrid(),c.push(e)}),""!=$(".filter-buscar input").val()&&"undefined"!=typeof $(".filter-buscar input").val()&&(current_filter={},filter_type="buscar",filter_value=$(".filter-buscar input").val(),current_filter.type=filter_type,current_filter.value=filter_value,c.push(current_filter)),c}function clearGrid(){$(".results").empty(),"fotografos"!==post_type&&"proyectos"!==post_type&&runMasonry(".results",".result")}function fixedHeader(){var a=getHeaderHeight(),b=scrollY();if(b>=a){var c=$(window).outerHeight(),d=c-a;$(".header-wrapper").addClass("header-wrapper--fixed").css("top",d),setHeaderHeightPadding(".footer-wrapper","bottom")}else $(".header-wrapper").removeClass("header-wrapper--fixed").css("top",0),setPadding(".footer-wrapper","bottom",0)}function scrollY(){return $(".content-wrapper").scrollTop()}function openLightbox(){$(".slideshow").cycle({slides:".image-single",fx:"scrollHorz",swipe:!0,timeout:0,centerHorz:!0,centerVert:!0}),$(".lightbox").show()}function openModal(a){var b=a.data("modal");console.log(b),b=$("#js-"+b+".modal-wrapper"),b.removeClass("hide")}function closeModal(a){var b=a.parent().parent();b.addClass("hide")}function advancedSearch(a,b,c,d){var e={};e.action="advanced_search",e.post_type=a,e.limit=c,e.existing_ids=d,e.filters="",b.length>0&&(e.filters=b),$.post(ajax_url,e,function(b){var d,e=$.parseJSON(b),f=-1;if($.each(e,function(b,c){switch(a){case"fotografias":d=getHtmlColecciones(c);break;case"fotografos":d=getHtmlFotografos(c);break;case"carteleras":d=getHtmlCarteleras(c);break;case"proyectos":d=getHtmlProyectos(c);break;case"exposiciones":d=getHtmlExposiciones(c);break;case"publicaciones":d=getHtmlPublicaciones(c);break;case"nuevas-adquisiciones":d=getHtmlColecciones(c);break;case"favoritos":d=getHtmlColecciones(c)}$(d).appendTo(".results"),f=b}),"fotografos"!==a&&"proyectos"!==a&&runMasonry(".results",".result"),f=parseInt(f)+1,parseInt(c)>parseInt(f)?$(".js-cargar-mas").hide():$(".js-cargar-mas").show(),0>f){var g='<div class="[ wrapper ]"><h2 class="[ padding ][ margin-bottom ][ text-center ][ bg-highlight color-claro ]">Tu búsqueda no generó ningún resultado, elimina alguno de los filtros de arriba hasta obtener resultados.</h2></div>';$(g).appendTo(".results"),setTimeout(function(){destroyMasonry(".results")},50)}}).fail(function(a){console.log(a)})}function getDescripcionColeccion(a){var b={};b.action="get_descripcion_coleccion",b.id_coleccion=a,$.post(ajax_url,b,function(a){var b=$.parseJSON(a);$("#js-info-coleccion .modal-body").html(b)})}function postAjaxForm(){var a={};a.action="get_descripcion_coleccion",a.id_coleccion=id_coleccion,$.post(ajax_url,a,function(a){var b=$.parseJSON(a);$("#js-info-coleccion .modal-body").html(b)})}function getExistingIds(){var a=$("body").find(".result"),b=[];return 0==a.length?0:($.each(a,function(a,c){b.push($(c).data("id"))}),b)}function getHtmlColecciones(a){var b='<article class="[ result ] [ columna xmall-6 small-ls-12 medium-4 large-3 ] [ margin-bottom-small ]" data-id="'+a.id+'"> 		<div class="[ relative ]"> 			<a class="[ block ]" href="'+a.permalink+'"> 				<img src="'+a.img_url+'" class="[ image-responsive ]" /> 				<span class="[ opacity-gradient--full ]"></span> 			</a> 			<div class="[ media-info media-info--small ] [ xmall-12 ]"> 				<p class="[ text-center ]">';return a.autor&&"Autor no identificado"!=a.autor&&(b=b+'<a href="'+a.url_autor+'" class="[ media--info__author ]">'+a.autor+"</a>, "),a.titulo&&("Sin título"!==a.titulo||"Sin título"!==a.titulo)&&(b=b+'<a href="#" class="[ media--info__name ]">'+a.titulo+"</a>, "),"undefined"!=typeof a.serie&&"undefined"!==a.serie&&""!==a.serie&&(b=b+'de la serie <span class="[ media--info__series ]">'+a.serie+"</span>, "),a.coleccion&&(b=b+'<br /> de la colección <a href="#" class="[ media--info__colection ]">'+a.coleccion+"</a>"),b+="</p> 			</div> 		</div> 	</article>"}function getHtmlFotografos(a){var b=' <a href="'+a.url+'" class="[ result ][ button button--hollow button--small button--dark ][ inline-block margin-bottom--small ]" data-id="'+a.id+'">'+a.fotografo+"</a> &nbsp;&nbsp;";return b}function getHtmlCarteleras(a){var b='<article class="[ result ][ columna xmall-6 small-ls-12 medium-4 large-3 ][ margin-bottom-small ]" data-id="'+a.id+'"> 		<div class="[ relative ]"> 			<a class="[ block ]" href="'+a.permalink+'"> 				<img src="'+a.img_url+'" class="[ image-responsive ]" /> 				<span class="[ opacity-gradient--full ]"></span> 				<div class="[ media-info media-info--small ] [ xmall-12 ]"> 					<p class="[ text-center ]"> 						<a href="'+a.permalink+'" class="[ media--info__name ]">'+a.titulo+"</a>";return a.fec_ini&&(b=b+'<p class="[ text-center ]">del '+a.fec_ini+" al "+a.fec_fin+"</p> "),b+="</p> 				</div> 			</a> 		</div> 	</article>"}function getHtmlProyectos(a){var b='<article class="[ result ][ bg-image ][ columna columna-margin xmall-12 medium-6 ]" data-id="'+a.id+'" style="background-image: url('+a.img_url+')"> 		<div class="[ opacity-gradient ][ square square-absolute ]"> 			<a class="[ block ][ media-link ]" href="'+a.permalink+'"></a> 			<div class="[ media-info media-info--small ][ xmall-12 ]"> 				<p class="[ text-center ]"> 					<a href="'+a.permalink+'" class="[ media--info__name ]">'+a.titulo+"</a> 				</p> 			</div> 		</div> 	</article>";return b}function getHtmlExposiciones(a){var b='<article class="[ result ][ columna xmall-6 small-ls-12 medium-4 large-3 ] [ margin-bottom-small ]" data-id="'+a.id+'"> 		<div class="[ relative ]"> 			<a class="[ block ]" href="'+a.permalink+'"> 				<img src="'+a.img_url+'" class="[ image-responsive ]" /> 				<span class="[ opacity-gradient--full ]"></span> 				<div class="[ media-info media-info--small ] [ xmall-12 ]"> 					<p class="[ text-center ]"> 						<a href="'+a.permalink+'" class="[ media--info__name ]">'+a.titulo+"</a> 					</p> 				</div> 			</a> 		</div> 	</article>";return b}function getHtmlPublicaciones(a){var b='<article class="[ result ][ columna xmall-6 small-ls-12 medium-4 large-3 ][ margin-bottom-small ]" data-id="'+a.id+'"> 		<div class="[ relative ]"> 			<a class="[ block ]" href="'+a.permalink+'"> 				<img src="'+a.img_url+'" class="[ image-responsive ]" /> 				<span class="[ opacity-gradient--full ]"></span> 				<div class="[ media-info media-info--small ] [ xmall-12 ]"> 					<p class="[ text-center ]"> 						<a href="'+a.permalink+'" class="[ media--info__name ]">'+a.titulo+"</a> 					</p> 				</div> 			</a> 		</div> 	</article>";return b}function addLike(a){var b={};b.action="add_like",b.post_id=a,$.post(ajax_url,b,function(a){$(".js-num-likes").text(a),$(".button--heart").addClass("active")})}function showTotalResults(a,b){var c={};c.action="get_total_results",c.filters=b.length>0?b:"",c.post_type=a,$.post(ajax_url,c,function(a){var b=$.parseJSON(a);$(".js-num-resultados span").text(b)})}function saveContact(a){$.post(ajax_url,a,function(a){console.log(a),$(".js-contact").empty(),$(".js-contact").append("<p>Gracias por contactarnos "+a+"</p>")})}function showNumberTweets(a){$.get("http://urls.api.twitter.com/1/urls/count.json?url="+a,function(a){console.log(a)})}function showNumberShares(a){console.log(a),!window.fbApiInit;try{FB.api("/",{id:a,access_token:"853048764736608|MaIMwoVY0SKEWJFYfZ7Ga4_NCrk"},function(b){if(console.log(b),b&&!b.error){if("undefined"!=typeof b.share){var c=b.share.share_count;$(".js-share-count").text(c)}}else showNumberShares(a)})}catch(b){console.log(b)}}function shareOnFacebook(a){FB.ui({method:"share",href:a},function(a){a&&!a.error_code})}function fbEnsureInit(a){window.fbApiInit||setTimeout(function(){fbEnsureInit(a)},50)}!function(a){"use strict";a(function(){new mlPushMenu(document.getElementById("mp-menu"),document.getElementById("trigger-xmall")),new mlPushMenu(document.getElementById("mp-menu"),document.getElementById("trigger-medium")),a(".loader").ajaxStart(function(){a(this).show()}).ajaxStop(function(){a(this).hide()})})}(jQuery);var $=jQuery.noConflict();