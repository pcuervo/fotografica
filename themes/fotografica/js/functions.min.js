/*! fotofrafica 2015-02-20 */
function setSquareHeight(){var a=$(window).width();$(".j-square").height(a)}function runMasonry(a,b){var c=$(a).masonry();c.imagesLoaded(function(){c.masonry({itemSelector:b}),c.masonry("reloadItems"),c.masonry("layout")})}function getHeaderHeight(){return $(".header-wrapper").height()}function getWindowHeight(){return $(window).height()}function setWindowHeight(a){$(a).height(getWindowHeight())}function setPadding(a,b,c){$(a).css("padding-"+b,c)}function setHeaderHeightPadding(a,b){var c=getHeaderHeight();$(a).css("padding-"+b,c)}function setHeightMinusElement(a,b,c){$.each($(a),function(){var a=$(this).closest(b),d=a.find(c+":first"),e=(a.outerHeight(),d.outerHeight()),f=getWindowHeight()-e;$(this).height(f)})}function showFilters(a){if($(a).hasClass("tab-filter--active"))return $(".tab-filter").removeClass("tab-filter--active"),void $(".filters__content > div").css("height","0px").removeClass("padding--small");$(".tab-filter").removeClass("tab-filter--active"),$(a).addClass("tab-filter--active");var b=$(a).data("filter");$(".filters__content > div").css("height","0px").removeClass("padding--small"),$(".filters__content .filter-"+b).addClass("padding--small").height("auto")}function toggleFiltersNav(){var a=$(".filters__results .filter").length;console.log(a),0==a&&$(".filters__results").hide(),a>0&&$(".filters__results").show()}function addFilter(a){var b=$(a).clone();if($(a).hasClass("filter--active")){$(a).removeClass("filter--active"),b.hasClass("filter--info")&&b.find("span").remove();var c=b.html();return $(".filters__results .filter:contains("+c+")").remove(),void toggleFiltersNav()}$(a).addClass("filter--active"),b.addClass("filter--active"),b.hasClass("filter--info")&&(b.removeClass("filter--info"),b.find("span").remove()),b.appendTo(".filters__results"),toggleFiltersNav()}function removeFilter(a){var b=$(a).html();$(a).remove(),$(".filters__content .filter:contains("+b+")").removeClass("filter--active"),toggleFiltersNav()}function getFilteredResults(){var a=$(".filters__results .filter--active"),b=[];return $.each(a,function(a,c){var d={},e=$(c).data("type"),f=$(c).data("value");d.type=e,d.value=f,clearGrid(),b.push(d)}),""!=$(".filter-buscar input").val()&&"undefined"!=typeof $(".filter-buscar input").val()&&(current_filter={},filter_type="buscar",filter_value=$(".filter-buscar input").val(),current_filter.type=filter_type,current_filter.value=filter_value,b.push(current_filter)),b}function clearGrid(){$(".results").empty(),runMasonry(".results",".result")}function fixedHeader(){var a=getHeaderHeight(),b=scrollY();if(b>=a){var c=$(window).outerHeight(),d=c-a;$(".header-wrapper").addClass("header-wrapper--fixed").css("top",d),setHeaderHeightPadding(".footer-wrapper","bottom")}else $(".header-wrapper").removeClass("header-wrapper--fixed").css("top",0),setPadding(".footer-wrapper","bottom",0)}function scrollY(){return $(".content-wrapper").scrollTop()}function openLightbox(){$(".cycle-slideshow").cycle({slides:".image-single",fx:"scrollHorz",swipe:"true",timeout:"0",centerHorz:"true",centerVert:"true"}),$(".lightbox").show()}function openModal(a){console.log("openModal");var b=a.data("modal");console.log(b),b=$("#js-"+b+".modal-wrapper"),b.fadeIn("fast",function(){$(this).removeClass("hide")})}function closeModal(a){var b=a.parent().parent();b.fadeOut("fast",function(){$(this).addClass("hide")})}function advancedSearch(a,b,c,d){var e={};e.action="advanced_search",e.post_type=a,e.limit=c,e.existing_ids=d,e.filters="",b.length>0&&(e.filters=b),$.post(ajax_url,e,function(b){console.log(b);var d,e=$.parseJSON(b),f=0;$.each(e,function(b,c){switch(a){case"fotografias":d=getHtmlColecciones(c);break;case"fotografos":d=getHtmlFotografos(c);break;case"carteleras":d=getHtmlCarteleras(c);break;case"proyectos":d=getHtmlProyectos(c);break;case"exposiciones":d=getHtmlExposiciones(c);break;case"publicaciones":d=getHtmlPublicaciones(c);break;case"nuevas-adquisiciones":d=getHtmlColecciones(c)}$(d).appendTo(".results"),f=b}),"fotografos"!==a&&runMasonry(".results",".result"),f=parseInt(f)+1,parseInt(c)>parseInt(f)?$(".js-cargar-mas").hide():$(".js-cargar-mas").show()}).fail(function(a){console.log(a)})}function getExistingIds(){var a=$("body").find(".result"),b=[];return 0==a.length?0:($.each(a,function(a,c){b.push($(c).data("id"))}),b)}function getHtmlColecciones(a){if("-"!=a.url_autor){'<a href="'+a.url_autor+'" class="[ media--info__author ]">'+a.autor+"</a>"}else{'<p class="[ media--info__author ]">'+a.autor+"</p>"}var b='<article class="[ result ] [ columna xmall-6 medium-4 large-3 ] [ margin-bottom-small ]" data-id="'+a.id+'"> 		<div class="[ relative ]"> 			<a class="[ block ]" href="'+a.permalink+'"> 				<img src="'+a.img_url+'" class="[ image-responsive ]" /> 				<span class="[ opacity-gradient--full ]"></span> 				<div class="[ media-info media-info--small ] [ xmall-12 ]"> 					<p class="[ text-center ]">';return a.autor&&(b="Autor no identificado"==a.autor?b+'<span class="[ media--info__author ]">'+a.autor+"</span>, ":b+'<a href="'+a.url_autor+'" class="[ media--info__author ]">'+a.autor+"</a>, "),a.titulo&&"Sin título"!==a.titulo&&(b=b+'<a href="#" class="[ media--info__name ]">'+a.titulo+"</a>, "),a.serie&&(b=b+'de la serie <span class="[ media--info__series ]">'+a.serie+"</span>, "),a.coleccion&&(b=b+'<br /> de la colección <a href="#" class="[ media--info__colection ]">'+a.coleccion+"</a>, "),a.ano&&(b=b+'<span class="[ media--info__date ]">'+a.ano+"</span>"),b+="</p> 				</div> 			</a> 		</div> 	</article>"}function getHtmlFotografos(a){var b=' <a href="'+a.url+'" class="[ result ][ button button--hollow button--small button--dark ][ inline-block margin-bottom--small ]" data-id="'+a.id+'">'+a.fotografo+"</a> &nbsp;&nbsp;";return b}function getHtmlCarteleras(a){var b='<article class="[ result ] [ columna xmall-6 medium-4 large-3 ] [ margin-bottom-small ]" data-id="'+a.id+'"> 		<div class="[ relative ]"> 			<a class="[ block ]" href="'+a.permalink+'"> 				<img src="'+a.img_url+'" class="[ image-responsive ]" /> 				<span class="[ opacity-gradient--full ]"></span> 				<div class="[ media-info media-info--small ] [ xmall-12 ]"> 					<p class="[ text-center ]"> 						<a href="'+a.permalink+'" class="[ media--info__name ]">'+a.titulo+'</a> 					</p> 					<p class="[ text-center ]"> 						del '+a.fec_ini+" al "+a.fec_fin+" 					</p> 				</div> 			</a> 		</div> 	</article>";return b}function getHtmlProyectos(a){var b='<article class="[ result ] [ columna xmall-6 medium-4 large-3 ] [ margin-bottom-small ]" data-id="'+a.id+'"> 		<div class="[ relative ]"> 			<a class="[ block ]" href="'+a.permalink+'"> 				<img src="'+a.img_url+'" class="[ image-responsive ]" /> 				<span class="[ opacity-gradient--full ]"></span> 				<div class="[ media-info media-info--small ] [ xmall-12 ]"> 					<p class="[ text-center ]"> 						<a href="'+a.permalink+'" class="[ media--info__name ]">'+a.titulo+"</a> 					</p> 				</div> 			</a> 		</div> 	</article>";return b}function getHtmlExposiciones(a){var b='<article class="[ result ] [ columna xmall-6 medium-4 large-3 ] [ margin-bottom-small ]" data-id="'+a.id+'"> 		<div class="[ relative ]"> 			<a class="[ block ]" href="'+a.permalink+'"> 				<img src="'+a.img_url+'" class="[ image-responsive ]" /> 				<span class="[ opacity-gradient--full ]"></span> 				<div class="[ media-info media-info--small ] [ xmall-12 ]"> 					<p class="[ text-center ]"> 						<a href="'+a.permalink+'" class="[ media--info__name ]">'+a.titulo+"</a> 					</p> 				</div> 			</a> 		</div> 	</article>";return b}function getHtmlPublicaciones(a){var b='<article class="[ result ] [ columna xmall-6 medium-4 large-3 ] [ margin-bottom-small ]" data-id="'+a.id+'"> 		<div class="[ relative ]"> 			<a class="[ block ]" href="'+a.permalink+'"> 				<img src="'+a.img_url+'" class="[ image-responsive ]" /> 				<span class="[ opacity-gradient--full ]"></span> 				<div class="[ media-info media-info--small ] [ xmall-12 ]"> 					<p class="[ text-center ]"> 						<a href="'+a.permalink+'" class="[ media--info__name ]">'+a.titulo+"</a> 					</p> 				</div> 			</a> 		</div> 	</article>";return b}!function(a){"use strict";a(function(){new mlPushMenu(document.getElementById("mp-menu"),document.getElementById("trigger-xmall")),new mlPushMenu(document.getElementById("mp-menu"),document.getElementById("trigger-medium")),a(".loader").ajaxStart(function(){a(this).show()}).ajaxStop(function(){a(this).hide()})})}(jQuery);var $=jQuery.noConflict();